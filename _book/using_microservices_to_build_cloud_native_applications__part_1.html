<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Using Microservices To Build Cloud Native Applications – Part 1 | My Book</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.1.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
    

        
    
    
    <link rel="next" href="./using_microservices_to_build_cloud_native_applications__part_2.html" />
    
    
    <link rel="prev" href="./index.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="1.1" data-basepath="." data-revision="Sun Jul 26 2015 18:30:42 GMT+0800 (CST)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" >
            
                
                    <a target="_blank" href="http:/ryanjbaxter.com/2015/07/15/using-microservices-to-build-cloud-native-applications-part-1/">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Using Microservices To Build Cloud Native Applications
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.1" data-path="using_microservices_to_build_cloud_native_applications__part_1.html">
            
                
                    <a href="./using_microservices_to_build_cloud_native_applications__part_1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Using Microservices To Build Cloud Native Applications – Part 1
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="using_microservices_to_build_cloud_native_applications__part_2.html">
            
                
                    <a href="./using_microservices_to_build_cloud_native_applications__part_2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Using Microservices To Build Cloud Native Applications – Part 2
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Developing_a_RESTful_Web_Service_Using_Spring_Boot.html">
            
                
                    <a href="./Developing_a_RESTful_Web_Service_Using_Spring_Boot.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Developing a RESTful Web Service Using Spring Boot
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >My Book</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="using-microservices-to-build-cloud-native-applications-%E2%80%93-part-1">Using Microservices To Build Cloud Native Applications &#x2013; Part 1</h1>
<h1 id="%E4%BD%BF%E7%94%A8%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%94%9F%E4%BA%91%E6%9C%8D%E5%8A%A1-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86">&#x4F7F;&#x7528;&#x5FAE;&#x670D;&#x52A1;&#x6784;&#x5EFA;&#x539F;&#x751F;&#x4E91;&#x670D;&#x52A1; - &#x7B2C;&#x4E00;&#x90E8;&#x5206;</h1>
<p>In my <a href="http://ryanjbaxter.com/2015/07/13/building-cloud-native-applications/" target="_blank">previous post</a> I described at a high level what it means to build a cloud native application and hopefully gave you an idea of why building applications in the cloud can be different than you may be used to. One thing many cloud native applications have in common is that they are often built using a microservices architecture. But before we talk about microservices lets talk about the types of applications most people are familiar with building today.</p>
<p>&#x5728;<a href="http://ryanjbaxter.com/2015/07/13/building-cloud-native-applications/" target="_blank">&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;</a>&#x4E2D;&#xFF0C;&#x6211;&#x4ECE;&#x66F4;&#x9AD8;&#x5C42;&#x9762;&#x4E0A;&#x63CF;&#x8FF0;&#x4E86;&#x4E91;&#x7AEF;&#x539F;&#x751F;&#x5E94;&#x7528;&#x7684;&#x6784;&#x5EFA;&#xFF0C;&#x671F;&#x671B;&#x8BA9;&#x4F60;&#x660E;&#x767D;&#x5728;&#x4E91;&#x4E0A;&#x6784;&#x5EFA;&#x5E94;&#x7528;&#x7684;&#x65B9;&#x5F0F;&#x548C;&#x4EE5;&#x5F80;&#x4E3A;&#x4F55;&#x4E0D;&#x540C;&#x3002;&#x4E91;&#x7AEF;&#x539F;&#x751F;&#x5E94;&#x7528;&#x7684;&#x4E00;&#x4E2A;&#x5171;&#x540C;&#x70B9;&#x5C31;&#x662F;&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x4F7F;&#x7528;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x8FDB;&#x884C;&#x6784;&#x5EFA;&#x3002;&#x4F46;&#x662F;&#x5728;&#x6211;&#x4EEC;&#x8C08;&#x8BBA;&#x5FAE;&#x670D;&#x52A1;&#x4E4B;&#x524D;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x56DE;&#x987E;&#x4E00;&#x4E0B;&#x76EE;&#x524D;&#x4EBA;&#x4EEC;&#x6240;&#x719F;&#x77E5;&#x7684;&#x51E0;&#x79CD;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7C7B;&#x578B;&#x3002;</p>
<p>Most applications people build today are 3-tier, monolithic applications. What do I mean by monolithic? Basically the entire application is deployed as a single entity. In Java terms this might mean when you deploy your application, you deploy the entire thing in a single WAR or JAR file. The fact that the application is monolithic is not a bad thing, but at some point most applications reach a certain size and gain a certain amount of complexity where the monolith is too hard to understand and is starting to hinder the productivity of the team. At this point the monolith is no longer suited for the cloud (or on premise) and something needs to change.</p>
<p>&#x76EE;&#x524D;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x6784;&#x5EFA;&#x7684;&#x5E94;&#x7528;&#x90FD;&#x662F;&#x4E09;&#x5C42;&#x5F0F;&#x7684;&#x3001;&#x5355;&#x4E00;&#x7684;&#x5E9E;&#x5927;&#x5E94;&#x7528;&#x3002;monolithic&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#x5462;&#xFF1F;&#x57FA;&#x672C;&#x4E0A;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x88AB;&#x90E8;&#x7F72;&#x4E3A;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x3002;&#x4ECE;Java&#x7684;&#x89D2;&#x5EA6;&#x800C;&#x8A00;&#xFF0C;&#x8FD9;&#x53EF;&#x80FD;&#x610F;&#x5473;&#x7740;&#x5F53;&#x4F60;&#x90E8;&#x7F72;&#x5E94;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6BCF;&#x6B21;&#x90FD;&#x9700;&#x8981;&#x90E8;&#x7F72;&#x6574;&#x4E2A;&#x5355;&#x4E2A;&#x7684;WAR&#x6216;&#x8005;JAR&#x6587;&#x4EF6;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x5355;&#x4E00;&#x5E94;&#x7528;&#x4E0D;&#x662F;&#x4E00;&#x4EF6;&#x574F;&#x4E8B;&#x60C5;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x5F53;&#x5927;&#x90E8;&#x5206;&#x5E94;&#x7528;&#x5230;&#x8FBE;&#x4E00;&#x5B9A;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5177;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x590D;&#x6742;&#x6027;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x5C06;&#x975E;&#x5E38;&#x96BE;&#x4EE5;&#x7406;&#x89E3;&#xFF0C;&#x5C31;&#x4F1A;&#x5F00;&#x59CB;&#x62D6;&#x5EF6;&#x6574;&#x4E2A;&#x56E2;&#x961F;&#x7684;&#x6548;&#x7387;&#x3002;&#x5728;&#x8FD9;&#x70B9;&#x4E0A;&#x6765;&#x8BF4;&#xFF0C;&#x5355;&#x4E00;&#x5E94;&#x7528;&#x5DF2;&#x7ECF;&#x4E0D;&#x518D;&#x9002;&#x7528;&#x4E8E;&#x4E91;&#x7AEF;&#x90E8;&#x7F72;&#xFF08;&#x4E5F;&#x8BB8;&#x662F;&#x5728;&#x5C06;&#x6765;&#xFF09;&#x548C;&#x9700;&#x6C42;&#x53D8;&#x5316;&#x7684;&#x60C5;&#x51B5;&#x4E86;&#x3002;</p>
<p>Enter microservices. At a high level an application that is implemented using a microservices architecture is one that is composed of several (this could be 10s or 100s) completely independent &#x201C;services&#x201D; or apps that work together to produce the overall end user experience. Obviously since the term &#x201C;micro&#x201D; is used in microservices these services are meant to be small, lightweight, and focus on a single task. How small is small? That is the million dollar question.</p>
<p>&#x73B0;&#x5728;&#x6765;&#x8BA8;&#x8BBA;&#x5FAE;&#x670D;&#x52A1;&#x3002;&#x4ECE;&#x66F4;&#x9AD8;&#x5C42;&#x9762;&#x800C;&#x8A00;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x91C7;&#x7528;&#x4E3A;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x5B9E;&#x73B0;&#x7684;&#x8BDD;&#xFF0C;&#x662F;&#x7531;&#x51E0;&#x4E2A;&#x5B8C;&#x5168;&#x72EC;&#x7ACB;&#x7684;&#x300C;&#x670D;&#x52A1;&#x300D;&#x6216;&#x5E94;&#x7528;&#x7EC4;&#x6210;&#xFF0C;&#x5171;&#x540C;&#x5DE5;&#x4F5C;&#x4ECE;&#x800C;&#x63D0;&#x4F9B;&#x603B;&#x4F53;&#x7684;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;&#x663E;&#x7136;&#x5F97;&#xFF0C;&#x300C;&#x5FAE;&#x300D;&#x6307;&#x7684;&#x662F;&#x4F7F;&#x7528;&#x5FAE;&#x670D;&#x52A1;&#xFF0C;&#x8FD9;&#x4E9B;&#x670D;&#x52A1;&#x610F;&#x5473;&#x7740;&#x5F88;&#x5C0F;&#xFF0C;&#x8F7B;&#x91CF;&#x7EA7;&#xFF0C;&#x4E13;&#x6CE8;&#x5355;&#x4E00;&#x4EFB;&#x52A1;&#x3002;&#x4F46;&#x662F;&#x300C;&#x5C0F;&#x300D;&#x5230;&#x5E95;&#x662F;&#x591A;&#x5C0F;&#xFF1F;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x767E;&#x4E07;&#x7F8E;&#x5143;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>There is no one measurement that I can give you that determines the correct size of a microservice. Instead it is all about productivity and speed. If a service gets to the point where you feel it is doing too many things and is hard to understand and work with, than it is likely too big and should be split into more than one service.</p>
<p>&#x6211;&#x6CA1;&#x6709;&#x786E;&#x5B9A;&#x7684;&#x624B;&#x6BB5;&#x6765;&#x786E;&#x5B9A;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x5177;&#x4F53;&#x5927;&#x5C0F;&#xFF0C;&#x7136;&#x800C;&#x8FD9;&#x901A;&#x5E38;&#x4E0E;&#x6548;&#x7387;&#x548C;&#x901F;&#x5EA6;&#x6709;&#x5173;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x6709;&#x5F88;&#x591A;&#x5730;&#x65B9;&#x8BA9;&#x4F60;&#x611F;&#x89C9;&#x505A;&#x4E86;&#x592A;&#x591A;&#xFF0C;&#x5E76;&#x4E14;&#x96BE;&#x4EE5;&#x7406;&#x89E3;&#x548C;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x5C31;&#x8FC7;&#x4E8E;&#x5E9E;&#x5927;&#xFF0C;&#x5E94;&#x8BE5;&#x5206;&#x5272;&#x6210;&#x4E0D;&#x540C;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x3002;</p>
<p><img src="http://ryanjbaxter.com/wp-content/uploads/2015/07/micro-service-architecture.png" alt=""></p>
<p>In addition to the small size of the code base, the team that works on each microservice is also small and compact. Each team for each microservice is composed of the developers, testers, product managers, etc. They act completely independent of each other team and each other microservice. This is a very important part of the microservices architecture. Microservices are not only about the technical architecture of your application, but also the architecture of you organization. There is no separate organizations for test, development, and product management. Each microservice is comprised of a team that has people who test, develop, do DevOps, and handles product management. That team focuses on that one service and that one service alone and are the only people responsible for that service.</p>
<p>&#x9664;&#x4E86;&#x4EE3;&#x7801;&#x5E93;&#x53D8;&#x5C0F;&#x4E4B;&#x5916;&#xFF0C;&#x5F00;&#x53D1;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x56E2;&#x961F;&#x4E5F;&#x53D8;&#x5F97;&#x5C0F;&#x800C;&#x7CBE;&#x3002;&#x6BCF;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x56E2;&#x961F;&#x90FD;&#x7531;&#x5F00;&#x53D1;&#x3001;&#x6D4B;&#x8BD5;&#x3001;&#x4EA7;&#x54C1;&#x7ECF;&#x7406;&#x7B49;&#x7EC4;&#x6210;&#xFF0C;&#x4ED6;&#x4EEC;&#x90FD;&#x4E0E;&#x5176;&#x4ED6;&#x56E2;&#x961F;&#x548C;&#x5FAE;&#x670D;&#x52A1;&#x5F7C;&#x6B64;&#x72EC;&#x7ACB;&#xFF0C;&#x8FD9;&#x662F;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x4E2D;&#x7ED9;&#x51FA;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;&#x5FAE;&#x670D;&#x52A1;&#x4E0D;&#x4EC5;&#x6307;&#x7684;&#x662F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6280;&#x672F;&#x67B6;&#x6784;&#xFF0C;&#x4E5F;&#x5305;&#x62EC;&#x7EC4;&#x7EC7;&#x67B6;&#x6784;&#x3002;&#x6CA1;&#x6709;&#x5206;&#x5F00;&#x7684;&#x6D4B;&#x8BD5;&#x3001;&#x5F00;&#x53D1;&#x3001;&#x4EA7;&#x54C1;&#x7BA1;&#x7406;&#x7684;&#x72EC;&#x7ACB;&#x7EC4;&#x7EC7;&#xFF0C;&#x800C;&#x662F;&#x6BCF;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x90FD;&#x5305;&#x62EC;&#x4E86;&#x6D4B;&#x8BD5;&#x3001;&#x5F00;&#x53D1;&#x3001;&#x8FD0;&#x7EF4;&#x548C;&#x4EA7;&#x54C1;&#x7BA1;&#x7406;&#x4EBA;&#x5458;&#x3002;&#x6574;&#x4E2A;&#x56E2;&#x961F;&#x4E13;&#x6CE8;&#x4E8E;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x5E76;&#x4E14;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x90FD;&#x7531;&#x552F;&#x4E00;&#x7684;&#x4EBA;&#x6765;&#x5355;&#x72EC;&#x8D1F;&#x8D23;&#x3002;</p>
<p>I always think that looking at concrete examples is a good idea when talking about something new. I have been working on a cloud native application that uses microservices. The idea behind the application is pretty simple. As a developer advocate, I am always giving talks at conferences and people, usually, have questions about the topic I am speaking about. I wanted to make it easier for people to ask questions so I wrote an application that allows you as a speaker to create an entry for a session you are giving and then anyone that attends that session can go to the application select your session and ask a question about the topic you are presenting on. Attendees can ask questions via the application itself or they can text questions from their mobile device. As a speaker you can then reply to whatever questions are asked via the application and the user who asked the question will get a response via email if they submitted the question via the application or via text if they texted the question. The idea is simple and you can imagine it would be easy to implement that application as a traditional 3-tier monolithic app. In fact, that is how it started out, and here is what it looked like.</p>
<p>&#x300C;&#x4E8B;&#x5B9E;&#x80DC;&#x4E8E;&#x96C4;&#x8FA9;&#x300D;&#xFF0C;&#x6211;&#x8BA4;&#x4E3A;&#x8C08;&#x8BBA;&#x4E00;&#x4EF6;&#x65B0;&#x4E8B;&#x7269;&#x7684;&#x65F6;&#x5019;&#x6700;&#x597D;&#x80FD;&#x6709;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x4F8B;&#x3002;&#x6211;&#x5DF2;&#x7ECF;&#x5728;&#x4F7F;&#x7528;&#x5FAE;&#x670D;&#x52A1;&#x6784;&#x5EFA;&#x4E91;&#x7AEF;&#x539F;&#x751F;&#x5E94;&#x7528;&#x4E86;&#xFF0C;&#x5E94;&#x7528;&#x80CC;&#x540E;&#x7684;&#x7406;&#x5FF5;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x6280;&#x672F;&#x62E5;&#x62A4;&#x8005;&#xFF0C;&#x6211;&#x603B;&#x662F;&#x5728;&#x4F1A;&#x8BAE;&#x4E0A;&#x53D1;&#x8868;&#x6F14;&#x8BB2;&#xFF0C;&#x4EBA;&#x4EEC;&#x901A;&#x5E38;&#x90FD;&#x4F1A;&#x5BF9;&#x6240;&#x8BB2;&#x5185;&#x5BB9;&#x6709;&#x6240;&#x7591;&#x95EE;&#x3002;&#x4E3A;&#x4E86;&#x4EBA;&#x4EEC;&#x80FD;&#x591F;&#x95EE;&#x95EE;&#x9898;&#x53D8;&#x5F97;&#x66F4;&#x5BB9;&#x6613;&#xFF0C;&#x6211;&#x5C31;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x4F7F;&#x5F97;&#x53EC;&#x5F00;&#x4F1A;&#x8BAE;&#x7684;&#x6F14;&#x8BB2;&#x8005;&#x80FD;&#x591F;&#x4E3A;&#x6B64;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8BB0;&#x5F55;&#xFF0C;&#x4E0E;&#x6B64;&#x540C;&#x65F6;&#x4EFB;&#x4F55;&#x53C2;&#x4F1A;&#x7684;&#x4EBA;&#x90FD;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x8BE5;&#x4F1A;&#x8BAE;&#x5E76;&#x4E14;&#x5BF9;&#x6240;&#x6F14;&#x8BB2;&#x7684;&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x63D0;&#x95EE;&#x3002;&#x53C2;&#x4F1A;&#x8005;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x76F4;&#x63A5;&#x95EE;&#x95EE;&#x9898;&#x6216;&#x8005;&#x53EF;&#x4EE5;&#x5728;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#x4E0A;&#x8F93;&#x5165;&#x95EE;&#x9898;&#x3002;&#x4F5C;&#x4E3A;&#x6F14;&#x8BB2;&#x8005;&#x5C31;&#x53EF;&#x4EE5;&#x56DE;&#x590D;&#x88AB;&#x95EE;&#x5230;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x7136;&#x540E;&#x63D0;&#x95EE;&#x8005;&#x5C31;&#x80FD;&#x591F;&#x5F97;&#x5230;&#x90AE;&#x4EF6;&#x7B54;&#x590D;&#xFF0C;&#x6216;&#x8005;&#x901A;&#x8FC7;&#x6587;&#x672C;&#x7684;&#x5F62;&#x5F0F;&#x76F4;&#x63A5;&#x5C55;&#x793A;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E0A;&#x3002;&#x8FD9;&#x4E2A;&#x60F3;&#x6CD5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x60F3;&#x5230;&#x5B83;&#x5F88;&#x5BB9;&#x6613;&#x901A;&#x8FC7;&#x4F20;&#x7EDF;&#x7684;&#x4E09;&#x5C42;&#x5F0F;&#x5355;&#x4E00;&#x5E94;&#x7528;&#x7ED3;&#x6784;&#x6765;&#x5B9E;&#x73B0;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x8FD9;&#x662F;&#x6700;&#x5F00;&#x59CB;&#x7684;&#x65F6;&#x5019;&#x7684;&#x6837;&#x5B50;&#x3002;</p>
<p><img src="http://ryanjbaxter.com/wp-content/uploads/2015/07/intro-to-microservices.jpg" alt=""></p>
<p>As you can see the monolith (the big blue square in the middle) had a number of components in it. It contained the client side code served to the browser, REST APIs the client side code used, a REST API for Twilio (for texting), and some code which took care of sending the emails/texts for answers. All the details about the sessions and the questions asked during those sessions was stored in a single DB. Like I said, a very traditional application architecture, and when deployed to the cloud it worked fine, no issues.</p>
<p>&#x5982;&#x4F60;&#x6240;&#x89C1;&#xFF0C;&#x5355;&#x4E00;&#x5E94;&#x7528;&#xFF08;&#x4E2D;&#x95F4;&#x7684;&#x84DD;&#x8272;&#x65B9;&#x5757;&#xFF09;&#x5305;&#x542B;&#x4E86;&#x5F88;&#x591A;&#x7EC4;&#x4EF6;&#x3002;&#x5B83;&#x5305;&#x542B;&#x4E86;&#x670D;&#x52A1;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x4EE3;&#x7801;&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x4EE3;&#x7801;&#x4F7F;&#x7528;&#x7684;REST APIs&#x3001;Twilio&#xFF08;&#x6587;&#x5B57;&#x8F93;&#x5165;&#xFF09;&#x7684;REST API&#x4EE5;&#x53CA;&#x7528;&#x4E8E;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x6216;&#x6587;&#x672C;&#x7B54;&#x6848;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x6240;&#x6709;&#x5173;&#x4E8E;&#x6F14;&#x8BB2;&#x548C;&#x5728;&#x63D0;&#x95EE;&#x7684;&#x7EC6;&#x8282;&#x90FD;&#x5B58;&#x50A8;&#x5728;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x3002;&#x5C31;&#x50CF;&#x6211;&#x6240;&#x8BF4;&#x7684;&#xFF0C;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x4F20;&#x7EDF;&#x7684;&#x5E94;&#x7528;&#x7ED3;&#x6784;&#xFF0C;&#x5DF2;&#x7ECF;&#x90E8;&#x7F72;&#x5728;&#x4E91;&#x670D;&#x52A1;&#x4E0A;&#xFF0C;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x95EE;&#x9898;&#x3002;</p>
<p>In fact at this point I would like to bring up an important point. In my own personal opinion (and not everyone agrees with me), I think that for certain types of applications a monolithic architecture will work fine in the cloud. For all the benefits of adopting microservices, one of the drawbacks is complexity (in how all the services works together, not in the individual services themselves). So if your application is simple enough and you are not experiencing some of the problems I have mentioned than it is OK to build a monolithic application and run it in the cloud. However, most production applications are not simple and quickly approach that threshold where the complexity (in the code) and size of the application starts effecting the stability of the application the performance of the team. Since I wanted to explore how I could transition this application to use microservices I decided to break this application apart, but that is not to say that this app the way it was originally architected was bound for failure.</p>
<p>&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x6211;&#x66F4;&#x60F3;&#x629B;&#x51FA;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x70B9;&#x3002;&#x5728;&#x6211;&#x4E2A;&#x4EBA;&#x89C2;&#x70B9;&#x4E2D;&#xFF08;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x4EBA;&#x90FD;&#x8BA4;&#x540C;&#xFF09;&#xFF0C;&#x6211;&#x8BA4;&#x4E3A;&#x67D0;&#x4E9B;&#x786E;&#x5B9A;&#x7C7B;&#x578B;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x91C7;&#x7528;&#x5355;&#x4E00;&#x7ED3;&#x6784;&#x53EF;&#x4EE5;&#x5728;&#x4E91;&#x4E0A;&#x8FD0;&#x884C;&#x5F97;&#x5F88;&#x597D;&#x3002;&#x4E3A;&#x4E86;&#x53D7;&#x76CA;&#x4E8E;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x4F18;&#x70B9;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x7F3A;&#x70B9;&#x5C31;&#x662F;&#x590D;&#x6742;&#x5EA6;&#xFF08;&#x5728;&#x4E8E;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x5982;&#x4F55;&#x5171;&#x540C;&#x5DE5;&#x4F5C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x72EC;&#x7ACB;&#x5DE5;&#x4F5C;&#xFF09;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8DB3;&#x591F;&#x575A;&#x5B9A;&#xFF0C;&#x4F60;&#x5E76;&#x4E0D;&#x4F1A;&#x9047;&#x5230;&#x6211;&#x6240;&#x63D0;&#x5230;&#x7684;&#x90A3;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x6784;&#x5EFA;&#x90E8;&#x7F72;&#x4E8E;&#x4E91;&#x4E0A;&#x7684;&#x5355;&#x4E00;&#x5E94;&#x7528;&#x662F;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x7684;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x4EA7;&#x54C1;&#x5E94;&#x7528;&#x90FD;&#x4E0D;&#x662F;&#x90A3;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x800C;&#x4E14;&#x5F88;&#x5FEB;&#x5C31;&#x8FBE;&#x5230;&#x4E86;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x4E0B;&#x9650;&#xFF08;&#x4EE3;&#x7801;&#x5C42;&#x6B21;&#x4E0A;&#xFF09;&#xFF0C;&#x5E94;&#x7528;&#x5927;&#x5C0F;&#x4E5F;&#x5F00;&#x59CB;&#x5F71;&#x54CD;&#x5E94;&#x7528;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#x548C;&#x56E2;&#x961F;&#x7684;&#x8868;&#x73B0;&#x3002;&#x56E0;&#x6B64;&#x6211;&#x60F3;&#x8981;&#x63A2;&#x7D22;&#x5982;&#x4F55;&#x5C06;&#x5176;&#x8F6C;&#x5316;&#x4E3A;&#x4F7F;&#x7528;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x62C6;&#x5206;&#x6210;&#x4E0D;&#x540C;&#x7684;&#x5E94;&#x7528;&#x90E8;&#x5206;&#x3002;&#x4F46;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x8BF4;&#xFF0C;&#x8FD9;&#x79CD;&#x6700;&#x5F00;&#x59CB;&#x7684;&#x67B6;&#x6784;&#x65B9;&#x5F0F;&#x662F;&#x5931;&#x8D25;&#x7684;&#x3002;</p>
<p>Lets look at a couple of problems that this monolithic architecture could cause in the cloud. First up failure. What happens if there is a problem in the Sessions API component of my application. Maybe it is chewing up a huge portion of the CPU, or maybe it just crashes. What happens to my application?</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x770B;&#x770B;&#x5355;&#x4E00;&#x7ED3;&#x6784;&#x5728;&#x4E91;&#x4E0A;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x3002;&#x9996;&#x5148;&#x662F;&#x5931;&#x8D25;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;Sessions API&#x7EC4;&#x4EF6;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#x3002;&#x4E5F;&#x8BB8;&#x662F;&#x5360;&#x7528;&#x4E86;CPU&#x7684;&#x5927;&#x90E8;&#x5206;&#x5185;&#x5B58;&#xFF0C;&#x4E5F;&#x8BB8;&#x76F4;&#x63A5;&#x5BFC;&#x81F4;&#x5D29;&#x6E83;&#x3002;&#x6211;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C06;&#x4F1A;&#x600E;&#x4E48;&#x6837;&#xFF1F;</p>
<p><img src="http://ryanjbaxter.com/wp-content/uploads/2015/07/intro-to-microservices2.jpg" alt=""></p>
<p>Thats right, pretty the entire application will be effected by this. If it crashes all the other components of my application come crashing down with it. Maybe it is not even a problem with my code, maybe it is the networking or hardware underneath my application provided by the cloud (stuff that is out of my control). Whatever the reason for the problem is, my entire application is unavailable even if there is a problem with just a single component. This makes my application very fragile and is not what we want, fragility is the enemy.</p>
<p>&#x5BF9;&#x5934;&#xFF0C;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x5C06;&#x4F1A;&#x88AB;&#x8FD9;&#x4E2A;&#x90E8;&#x5206;&#x6240;&#x5F71;&#x54CD;&#xFF0C;&#x8FD9;&#x4E00;&#x4E2A;&#x90E8;&#x5206;&#x5D29;&#x6E83;&#x76F4;&#x63A5;&#x5BFC;&#x81F4;&#x4E86;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#x4E5F;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x751A;&#x81F3;&#x4E0D;&#x662F;&#x6211;&#x7684;&#x4EE3;&#x7801;&#x95EE;&#x9898;&#xFF0C;&#x4E5F;&#x8BB8;&#x662F;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x6216;&#x8005;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E4B;&#x4E0B;&#x7684;&#x4E91;&#x670D;&#x52A1;&#x7684;&#x786C;&#x4EF6;&#x95EE;&#x9898;&#xFF08;&#x4E00;&#x4E9B;&#x5728;&#x6211;&#x638C;&#x63A7;&#x4E4B;&#x5916;&#x7684;&#x65F6;&#x671F;&#xFF09;&#x3002;&#x4E0D;&#x8BBA;&#x95EE;&#x9898;&#x7684;&#x539F;&#x56E0;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x7EC4;&#x4EF6;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x5C31;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x5C06;&#x4F7F;&#x5F97;&#x5E94;&#x7528;&#x975E;&#x5E38;&#x8106;&#x5F31;&#xFF0C;&#x8FD9;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#x654C;&#x4EBA;&#x3002;</p>
<p>The next problem with the monolithic architecture is scalability. Lets look at what scaling the monolith looks like.</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x5355;&#x4E00;&#x7ED3;&#x6784;&#x7684;&#x53EF;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x6269;&#x5C55;&#x8FC7;&#x540E;&#x7684;&#x6837;&#x5B50;&#x3002;</p>
<p><img src="http://ryanjbaxter.com/wp-content/uploads/2015/07/intro-to-microservices3.jpg" alt=""></p>
<p>Petty much what you would expect right? Instead of 1 instance of the monolith running, I have 2 instances running with a load balancer sitting infront of both instances routing requests between the two. There is nothing wrong with this configuration, it will work fine. Conceptually though, it is probably not what I really need. In all reality, if I am at the point where I need to scale my application it is more likely that it is just one component of my application that needs to scale. For example, say the Sessions API component is under a lot of load and can&#x2019;t handle the number of requests being issued to it. Scaling that component horizontally will solve the issue, but since my application is a monolith I can&#x2019;t just scale that one component I have to scale the entire app. Probably not a big idea when it is just one component of our monolith that needs to scale, but what if I have 2 or 3 components that need to be scaled? Maybe the Sessions API component would be fine with 2 instances but the Questions API component needs 5. My only option is to scale my monolith up to 5 instances even though most of the other component don&#x2019;t need that many instances. This is a big waste of resources, and in the cloud that means wasted money!</p>
<p>&#x6BD4;&#x4F60;&#x60F3;&#x8C61;&#x7684;&#x591A;&#x5F97;&#x591A;&#xFF0C;&#x5BF9;&#x5427;&#xFF1F;&#x4E0D;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x5728;&#x8FD0;&#x884C;&#x4E86;&#xFF0C;&#x800C;&#x662F;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x8D1F;&#x8F7D;&#x5E73;&#x8861;&#x5668;&#x6765;&#x5904;&#x7406;&#x4E24;&#x4E2A;&#x5B9E;&#x4F8B;&#x7684;&#x8DEF;&#x7531;&#x8BF7;&#x6C42;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x914D;&#x7F6E;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x826F;&#x597D;&#x3002;&#x7406;&#x8BBA;&#x4E0A;&#x5C3D;&#x7BA1;&#x5982;&#x6B64;&#xFF0C;&#x4F46;&#x8FD9;&#x53EF;&#x80FD;&#x5E76;&#x4E0D;&#x662F;&#x6211;&#x771F;&#x6B63;&#x9700;&#x8981;&#x7684;&#x4E1C;&#x897F;&#x3002;&#x73B0;&#x5B9E;&#x60C5;&#x51B5;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x6269;&#x5C55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4E3A;&#x5E94;&#x7528;&#x6269;&#x5C55;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x3002;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;Session API&#x8FD9;&#x4E2A;&#x7EC4;&#x4EF6;&#x5904;&#x4E8E;&#x5DE8;&#x5927;&#x7684;&#x8D1F;&#x8F7D;&#x4E4B;&#x4E0B;&#xFF0C;&#x4E0D;&#x80FD;&#x591F;&#x5904;&#x7406;&#x90A3;&#x4E48;&#x591A;&#x88AB;&#x53D1;&#x9001;&#x7684;&#x8BF7;&#x6C42;&#x3002;&#x6C34;&#x5E73;&#x6269;&#x5C55;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x6211;&#x7684;&#x5E94;&#x7528;&#x662F;&#x5355;&#x4E00;&#x7ED3;&#x6784;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5E76;&#x4E0D;&#x80FD;&#x6269;&#x5C55;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x800C;&#x662F;&#x4E0D;&#x5F97;&#x4E0D;&#x6269;&#x5C55;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x3002;&#x53EF;&#x80FD;&#x5728;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x9700;&#x8981;&#x6269;&#x5C55;&#x7684;&#x65F6;&#x5019;&#x95EE;&#x9898;&#x4E0D;&#x5927;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x6709;&#x4E24;&#x4E2A;&#x6216;&#x8005;&#x4E09;&#x4E2A;&#x7EC4;&#x4EF6;&#x9700;&#x8981;&#x6269;&#x5C55;&#x5462;&#xFF1F;&#x4E5F;&#x8BB8;Session API&#x7EC4;&#x4EF6;&#x53EA;&#x53EF;&#x4EE5;&#x4E0E;&#x4E24;&#x4E2A;&#x5B9E;&#x4F8B;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;Question API&#x7EC4;&#x4EF6;&#x5374;&#x9700;&#x8981;&#x4E94;&#x4E2A;&#x3002;&#x552F;&#x4E00;&#x7684;&#x9009;&#x62E9;&#x5C31;&#x662F;&#x5C06;&#x6211;&#x7684;&#x5355;&#x4E00;&#x5E94;&#x7528;&#x6269;&#x5C55;&#x5230;&#x4E94;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x751A;&#x81F3;&#x5927;&#x90E8;&#x5206;&#x5176;&#x4ED6;&#x7684;&#x7EC4;&#x4EF6;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x8FD9;&#x4E48;&#x591A;&#x5B9E;&#x4F8B;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x6781;&#x5927;&#x7684;&#x8D44;&#x6E90;&#x6D6A;&#x8D39;&#xFF0C;&#x5728;&#x4E91;&#x4E0A;&#x610F;&#x5473;&#x7740;&#x6D6A;&#x8D39;&#x5F88;&#x591A;&#x94B1;&#x3002;</p>
<p>In addition to the problems with monolithic applications described above we also have the problem of working with huge monolithic code bases. Consider when someone new joins the team to work on a monolithic application, how long would it take them to understand how the application works? The answer is a very long time, if ever. I know from experience. I worked on a giant, 25 year old, monolithic application in my previous role at IBM, and I only understood a very small piece of how that application worked and I worked on it for 5 years! Other issues include the time needed to build, test, and deploy monolithic applications. It is incredibly slow and fragile process (remember fragility is the enemy). If you have worked on a monolithic application, you know how painful this process can be. You get to the point where you are ready to release and someone finds a bug in a single small component. This stops everything, everything needs to go through the release process all over again, that is easily a multi-day process. This is just not acceptable when you are looking to be agile and move with speed.</p>
<p>&#x9664;&#x4E86;&#x4E0A;&#x6587;&#x63CF;&#x8FF0;&#x7684;&#x5355;&#x4E00;&#x5E94;&#x7528;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x95EE;&#x9898;&#x4E4B;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528;&#x5DE8;&#x5927;&#x7684;&#x5355;&#x4E00;&#x4EE3;&#x7801;&#x5E93;&#x65F6;&#x4E5F;&#x6709;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#x3002;&#x8003;&#x8651;&#x5230;&#x65B0;&#x4EBA;&#x52A0;&#x5165;&#x4E3A;&#x5355;&#x4E00;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x7684;&#x56E2;&#x961F;&#xFF0C;&#x4ED6;&#x4EEC;&#x9700;&#x8981;&#x591A;&#x4E45;&#x624D;&#x80FD;&#x591F;&#x7406;&#x89E3;&#x5E94;&#x7528;&#x7684;&#x5DE5;&#x4F5C;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#xFF1F;&#x7B54;&#x6848;&#x5C31;&#x662F;&#x65F6;&#x95F4;&#x975E;&#x5E38;&#x957F;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x7684;&#x8BDD;&#x3002;&#x4ECE;&#x7ECF;&#x9A8C;&#x5F97;&#x77E5;&#xFF0C;&#x6211;&#x4E4B;&#x524D;&#x5728;IBM&#x5F00;&#x53D1;&#x4E00;&#x4E2A;&#x5E9E;&#x5927;&#x7684;&#x3001;&#x5177;&#x6709;25&#x5E74;&#x5386;&#x53F2;&#x7684;&#x5355;&#x4E00;&#x5E94;&#x7528;&#x3002;&#x5C3D;&#x7BA1;&#x6211;&#x5DE5;&#x4F5C;&#x4E86;&#x4E94;&#x5E74;&#xFF0C;&#x6211;&#x4E5F;&#x53EA;&#x662F;&#x7406;&#x89E3;&#x4E86;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x5DE5;&#x4F5C;&#x7684;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#x3002;&#x5176;&#x4ED6;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x5305;&#x62EC;&#x6784;&#x5EFA;&#x3001;&#x6D4B;&#x8BD5;&#x3001;&#x90E8;&#x7F72;&#xFF0C;&#x8FD9;&#x5176;&#x4E2D;&#x7684;&#x8FC7;&#x7A0B;&#x662F;&#x975E;&#x5E38;&#x7F13;&#x6162;&#x548C;&#x8106;&#x5F31;&#x7684;&#xFF08;&#x8BB0;&#x4F4F;&#x8106;&#x5F31;&#x662F;&#x654C;&#x4EBA;&#xFF09;&#x3002;&#x5982;&#x679C;&#x4F60;&#x4E5F;&#x5728;&#x4E00;&#x4E2A;&#x5355;&#x4E00;&#x5E94;&#x7528;&#x9879;&#x76EE;&#x4E0A;&#x5E72;&#x8FC7;&#xFF0C;&#x4F60;&#x4E5F;&#x4F1A;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x6709;&#x591A;&#x4E48;&#x75DB;&#x82E6;&#x3002;&#x5F53;&#x4F60;&#x51C6;&#x5907;&#x597D;&#x53D1;&#x5E03;&#x7684;&#x65F6;&#x5019;&#x53D1;&#x73B0;&#x6709;&#x4EBA;&#x5728;&#x4E00;&#x4E2A;&#x5C0F;&#x6A21;&#x5757;&#x4E2D;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x5C0F;bug&#xFF0C;&#x8FD9;&#x5C06;&#x4F1A;&#x505C;&#x6B62;&#x6240;&#x6709;&#x4E8B;&#x60C5;&#xFF0C;&#x6240;&#x6709;&#x4E8B;&#x60C5;&#x90FD;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x6765;&#x8FC7;&#x3002;&#x8FD9;&#x5F88;&#x53EF;&#x80FD;&#x5C31;&#x662F;&#x5F88;&#x591A;&#x5929;&#x7684;&#x4E00;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x5F53;&#x4F60;&#x9700;&#x8981;&#x654F;&#x6377;&#x548C;&#x524D;&#x8FDB;&#x901F;&#x5EA6;&#x7684;&#x65F6;&#x5019;&#x8FD9;&#x5C06;&#x662F;&#x65E0;&#x6CD5;&#x63A5;&#x53D7;&#x7684;&#x3002;</p>
<p>So how does changing the application to a microservices architecture help solve some of these problems? Let take a look at how the application looks once we move to using microservices.</p>
<p>&#x6240;&#x4EE5;&#x5C06;&#x5E94;&#x7528;&#x6539;&#x6210;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x662F;&#x600E;&#x4E48;&#x5E2E;&#x52A9;&#x89E3;&#x51B3;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x7684;&#x5462;&#xFF1F;&#x8BA9;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x957F;&#x4EC0;&#x4E48;&#x6837;&#x5B50;&#x3002;</p>
<p><img src="http://ryanjbaxter.com/wp-content/uploads/2015/07/intro-to-microservices4.jpg" alt=""></p>
<p>For the most part, what I have done here is take each light blue box from the monlithic architecture and made it its own app, or microservice. The SendGrid and Twillio services were also broken out into separate apps, I will address why I did this later on when we talk about scalabilty. From a fragility point of view, this architecture if much more resilient. Lets take the same example from above where the Sessions Service crashes, hangs, or goes down due to the infrastructure underneath it. In this architecture, if that happens, the client side code will still be served to clients, and the Questions, Reply, SendGrid, and Twilio services all will continue to function as before. Will the app behave perfectly with the Sessions Service unavailable? No. Is it better than if the entire application was down, YES!</p>
<p>&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x80FD;&#x591F;&#x505A;&#x7684;&#x5C31;&#x662F;&#x4ECE;&#x5355;&#x4E00;&#x67B6;&#x6784;&#x5E94;&#x7528;&#x4E2D;&#x62BD;&#x53D6;&#x51FA;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x84DD;&#x8272;&#x76D2;&#x5B50;&#xFF0C;&#x4F7F;&#x4E4B;&#x6210;&#x4E3A;&#x72EC;&#x7ACB;&#x7684;&#x5E94;&#x7528;&#x6216;&#x5FAE;&#x670D;&#x52A1;&#x3002;SendGrid&#x548C;Twillio&#x670D;&#x52A1;&#x4E5F;&#x53EF;&#x4EE5;&#x5206;&#x89E3;&#x6210;&#x72EC;&#x7ACB;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x6211;&#x5C06;&#x4F1A;&#x5728;&#x8BA8;&#x8BBA;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x7684;&#x65F6;&#x5019;&#x8BA8;&#x8BBA;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x6837;&#x505A;&#x3002;&#x4ECE;&#x8106;&#x5F31;&#x6027;&#x8FD9;&#x4E2A;&#x89D2;&#x5EA6;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x79CD;&#x67B6;&#x6784;&#x66F4;&#x5BCC;&#x6709;&#x5F39;&#x6027;&#x3002;&#x8BA9;&#x6211;&#x4EEC;&#x4E3E;&#x4E00;&#x4E2A;&#x8DDF;&#x524D;&#x9762;&#x4E00;&#x6837;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x5982;&#x679C;Sessions&#x670D;&#x52A1;&#x5D29;&#x6E83;&#x4E86;&#x3001;&#x5931;&#x6548;&#x4E86;&#x6216;&#x8005;&#x7531;&#x4E8E;&#x5E95;&#x5C42;&#x7684;&#x786C;&#x4EF6;&#x8BBE;&#x65BD;&#x6545;&#x969C;&#x53D1;&#x751F;&#x6545;&#x969C;&#x3002;&#x5982;&#x679C;&#x5728;&#x8FD9;&#x79CD;&#x67B6;&#x6784;&#x4E2D;&#x53D1;&#x751F;&#x7C7B;&#x4F3C;&#x60C5;&#x51B5;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4EE3;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x670D;&#x52A1;&#x4E8E;&#x5BA2;&#x6237;&#x3002;Questions&#x3001;Reply&#x3001;SendGrid&#x548C;Twilio&#x670D;&#x52A1;&#x90FD;&#x50CF;&#x4E4B;&#x524D;&#x4E00;&#x6837;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;&#x6CA1;&#x6709;&#x4E86;Sessions Service&#x5E94;&#x7528;&#x8FD8;&#x4F1A;&#x8868;&#x73B0;&#x5F97;&#x90A3;&#x4E48;&#x5B8C;&#x7F8E;&#x561B;&#xFF1F;&#x4E0D;&#x4F1A;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x6BD4;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x762B;&#x75EA;&#x8981;&#x597D;&#x5F97;&#x591A;&#xFF0C;&#x5BF9;&#x5427;&#xFF1F;</p>
<p>What about scalability with this architecture? It is much better than before because I can scale each service independently of the other.</p>
<p>&#x90A3;&#x8FD9;&#x79CD;&#x67B6;&#x6784;&#x7684;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x5982;&#x4F55;&#x5462;&#xFF1F;&#x8FD9;&#x4E5F;&#x6BD4;&#x4E4B;&#x524D;&#x597D;&#x5F97;&#x591A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x53EF;&#x4EE5;&#x4E3A;&#x6BCF;&#x4E2A;&#x72EC;&#x7ACB;&#x4E8E;&#x5176;&#x4ED6;&#x7684;&#x670D;&#x52A1;&#x8FDB;&#x884C;&#x6269;&#x5C55;&#x3002;</p>
<p><img src="http://ryanjbaxter.com/wp-content/uploads/2015/07/intro-to-microservices5.jpg" alt=""></p>
<p>In the above picture you can see I am able to scale the Sessions Service without scaling any other part of the application. The microservices architecture allows me to scale only the components of my application that need it. This is the reason for the changes I made to the SendGrid and Twilio services. These two services are responsible for sending out replies to questions via email or text. As you can imagine it might be easy for them to become overloaded with many speakers replying to questions at once. At the same time it is not important that those replies go out the second the speaker sends them, so in my opinion, this was the perfect place to use a message queue. The reply service receives replies that need to be sent out and just places them in a queue, which is a very quick operation. The SendGrid and Twilio services are more like workers which just take replies out of the queue and sends them along. This allows the reply service to handle much more load and at the same time I can scale the SendGrid and Twilio services up or down essentially creating more or less worked to handle whatever is in the queue.</p>
<p>&#x5982;&#x56FE;&#x6240;&#x793A;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6211;&#x53EF;&#x4EE5;&#x6269;&#x5C55;Session&#x670D;&#x52A1;&#x800C;&#x4E0D;&#x7528;&#x6269;&#x5C55;&#x5E94;&#x7528;&#x7684;&#x5176;&#x4ED6;&#x4EFB;&#x4F55;&#x90E8;&#x5206;&#x3002;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x53EF;&#x4EE5;&#x8BA9;&#x6211;&#x53EA;&#x6269;&#x5C55;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x9700;&#x8981;&#x7684;&#x7EC4;&#x4EF6;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x5BF9;SendGrid&#x548C;Twillio&#x670D;&#x52A1;&#x505A;&#x51FA;&#x4E86;&#x6539;&#x53D8;&#xFF0C;&#x8FD9;&#x4E24;&#x90E8;&#x5206;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x90AE;&#x4EF6;&#x6216;&#x6587;&#x672C;&#x4FE1;&#x606F;&#x53D1;&#x9001;&#x95EE;&#x9898;&#x7684;&#x56DE;&#x590D;&#x3002;&#x53EF;&#x4EE5;&#x60F3;&#x8C61;&#x7684;&#x662F;&#xFF0C;&#x5F53;&#x5F88;&#x591A;&#x6F14;&#x8BB2;&#x8005;&#x540C;&#x65F6;&#x56DE;&#x590D;&#x95EE;&#x9898;&#x7684;&#x65F6;&#x5019;&#xFF0C;reply&#x670D;&#x52A1;&#x5F88;&#x5BB9;&#x6613;&#x5C31;&#x8FC7;&#x8F7D;&#x4E86;&#x3002;&#x4E0E;&#x6B64;&#x540C;&#x65F6;&#xFF0C;&#x6F14;&#x8BB2;&#x8005;&#x5C06;&#x56DE;&#x590D;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x7684;&#x90A3;&#x4E00;&#x79D2;&#x5E76;&#x4E0D;&#x91CD;&#x8981;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x7684;&#x89C2;&#x70B9;&#x662F;&#xFF0C;&#x8FD9;&#x65F6;&#x4F7F;&#x7528;&#x6D88;&#x606F;&#x961F;&#x5217;&#x662F;&#x6700;&#x597D;&#x4E0D;&#x8FC7;&#x7684;&#x4E86;&#x3002;reply&#x670D;&#x52A1;&#x63A5;&#x53D7;&#x56DE;&#x590D;&#xFF0C;&#x518D;&#x5C06;&#x5176;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5C06;&#x5B83;&#x4EEC;&#x653E;&#x5230;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x5F88;&#x8FC5;&#x901F;&#x3002;SendGrid&#x548C;Twillio&#x670D;&#x52A1;&#x66F4;&#x50CF;&#x4E00;&#x4E2A;&#x5DE5;&#x4EBA;&#xFF0C;&#x80FD;&#x591F;&#x5C06;&#x56DE;&#x590D;&#x4ECE;&#x961F;&#x5217;&#x4E2D;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5728;&#x5355;&#x72EC;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x3002;&#x8FD9;&#x5C06;&#x4F7F;&#x5F97;reply&#x670D;&#x52A1;&#x80FD;&#x591F;&#x5904;&#x7406;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x7684;&#x8D1F;&#x8F7D;&#x3002;&#x4E0E;&#x6B64;&#x540C;&#x65F6;&#xFF0C;&#x6211;&#x4E5F;&#x53EF;&#x4EE5;&#x589E;&#x52A0;&#x6216;&#x8005;&#x51CF;&#x5C11;SendGrid&#x548C;Twillio&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x672C;&#x8D28;&#x4E0A;&#x5C31;&#x662F;&#x521B;&#x5EFA;&#x5904;&#x7406;&#x6D88;&#x606F;&#x961F;&#x5217;&#x7684;&#x591A;&#x548C;&#x5C11;&#x3002;</p>
<p>There is one part of the microservices architecture in the pictures above that I have not addressed yet, and that has to do with the databases. In the monolithic architecture there was a single database, but in the microservices architecture there are 2, one database for the Questions Service and one for the Sessions Service, why? One of the golden rules of microservices is that each service should be independent of each other. If 2 services are sharing the same database than they are not truly independent because changes or problems with the database can effect one or both services. For this reason if a microservice needs to persist data, than it should do so in its own database. This in itself introduces a new set of problems and is one of the reasons why microservices architectures can be more complicated than monolithic architectures. The most challenging problem this introduces is a data consistency problem because you could be having to persist the same data in 2 different databases. The approach that most microservice applications take to solve this problem is to apply the <a href="http://www.ben-morris.com/eventual-consistency-and-the-trade-offs-required-by-distributed-development/" target="_blank">principal of eventual consistency to their data</a>, meaning the data in the different databases may not be consistent for some period of time but eventually it will be. This topic deserves its own blog post so I won&#x2019;t go into it here, but try searching the &#x201C;Internets&#x201D; and I am sure you will find much more information on various approaches to this problem.</p>
<p>&#x8FD9;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x6211;&#x5728;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x4E2D;&#x6CA1;&#x6709;&#x63D0;&#x5230;&#x7684;&#x6570;&#x636E;&#x5E93;&#x90E8;&#x5206;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x7247;&#x4E2D;&#x770B;&#x5230;&#x3002;&#x5728;&#x5355;&#x4E00;&#x67B6;&#x6784;&#x4E2D;&#x6570;&#x636E;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x4E2D;&#x6709;&#x4E24;&#x4E2A;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;Questions Service&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;Sessions Service&#x6570;&#x636E;&#x5E93;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x4E00;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x9EC4;&#x91D1;&#x51C6;&#x5219;&#x5C31;&#x662F;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x5E94;&#x8BE5;&#x5F7C;&#x6B64;&#x72EC;&#x7ACB;&#x3002;&#x5982;&#x679C;&#x4E24;&#x4E2A;&#x670D;&#x52A1;&#x5171;&#x4EAB;&#x540C;&#x4E00;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x90A3;&#x5C31;&#x4E0D;&#x662F;&#x771F;&#x6B63;&#x7684;&#x72EC;&#x7ACB;&#x3002;&#x56E0;&#x4E3A;&#x6570;&#x636E;&#x7684;&#x53D8;&#x5316;&#x548C;&#x95EE;&#x9898;&#x90FD;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x6216;&#x5171;&#x540C;&#x7684;&#x670D;&#x52A1;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6BCF;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x90FD;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x81EA;&#x5DF1;&#x7684;&#x6570;&#x636E;&#x5E93;&#x6765;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x3002;&#x8FD9;&#x672C;&#x8EAB;&#x5F15;&#x5165;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x65B0;&#x95EE;&#x9898;&#xFF0C;&#x5176;&#x4E2D;&#x4E4B;&#x4E00;&#x5C31;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x8981;&#x6BD4;&#x5355;&#x4E00;&#x67B6;&#x6784;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x3002;&#x6700;&#x5177;&#x6709;&#x6311;&#x6218;&#x6027;&#x7684;&#x95EE;&#x9898;&#x662F;&#x4ECB;&#x7ECD;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5728;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x5206;&#x522B;&#x5B58;&#x50A8;&#x540C;&#x6837;&#x7684;&#x6570;&#x636E;&#x3002;&#x5927;&#x591A;&#x6570;&#x5FAE;&#x670D;&#x52A1;&#x5E94;&#x7528;&#x91C7;&#x7528;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x91C7;&#x7528;<a href="http://www.ben-morris.com/eventual-consistency-and-the-trade-offs-required-by-distributed-development/" target="_blank">&#x6700;&#x7EC8;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x7684;&#x539F;&#x5219;</a>&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5728;&#x4E0D;&#x540C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6570;&#x636E;&#x5728;&#x4E0D;&#x540C;&#x65F6;&#x95F4;&#x6BB5;&#x53EF;&#x80FD;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x4F46;&#x6700;&#x7EC8;&#x4F1A;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;&#x8FD9;&#x4E2A;&#x8BDD;&#x9898;&#x5DF2;&#x7ECF;&#x5728;&#x5176;&#x4ED6;&#x535A;&#x5BA2;&#x4E2D;&#x6709;&#x6240;&#x63A2;&#x8BA8;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x6DF1;&#x7A76;&#x3002;&#x4F46;&#x662F;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x641C;&#x7D22;&#x201C;Internets&#x201D;&#xFF0C;&#x4F60;&#x80AF;&#x5B9A;&#x4F1A;&#x627E;&#x5230;&#x5404;&#x79CD;&#x5173;&#x4E8E;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>
<p>What about the code base of the application? Once I split the monolithic application up into microservices I actually created several code bases. Each microservice has its own git repo, its own build pipeline, its own defect tracking system. Remember above where we talked about how each microservice needs to be independent of each other? Well this not only applies to data storage but also source control. If I put all the code for each microservice in a single git repo (which is what I did at first) than changes to that git repo effect all microservices. For example, if for some reason I need to create a branch just to work on a defect in one microservice I end up creating a branch for all microservices. This is not really what I want to do and can have effects on the other services (ie merging).</p>
<p>&#x90A3;&#x8FD9;&#x79CD;&#x5E94;&#x7528;&#x7684;&#x4EE3;&#x7801;&#x5E93;&#x5982;&#x4F55;&#x5462;&#xFF1F;&#x4E00;&#x65E6;&#x6211;&#x5C06;&#x5355;&#x4E00;&#x5E94;&#x7528;&#x5206;&#x89E3;&#x6210;&#x5FAE;&#x670D;&#x52A1;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x5C31;&#x521B;&#x5EFA;&#x4E86;&#x591A;&#x4E2A;&#x4EE3;&#x7801;&#x5E93;&#x3002;&#x6BCF;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x90FD;&#x6709;&#x5C5E;&#x4E8E;&#x81EA;&#x5DF1;&#x7684;git&#x4ED3;&#x5E93;&#xFF0C;&#x81EA;&#x5DF1;&#x7684;&#x6784;&#x5EFA;&#x6D41;&#x7A0B;&#xFF0C;&#x81EA;&#x5DF1;&#x7684;&#x95EE;&#x9898;&#x8FFD;&#x6C42;&#x7CFB;&#x7EDF;&#x3002;&#x8BB0;&#x4F4F;&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x6240;&#x8BA8;&#x8BBA;&#x7684;&#xFF0C;&#x6BCF;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x4E3A;&#x4F55;&#x9700;&#x8981;&#x72EC;&#x7ACB;&#x4E8E;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#xFF1F;&#x8FD9;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5B58;&#x50A8;&#xFF0C;&#x4E5F;&#x5305;&#x62EC;&#x8D44;&#x6E90;&#x63A7;&#x5236;&#x3002;&#x5982;&#x679C;&#x6211;&#x5C06;&#x6BCF;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x6240;&#x6709;&#x4EE3;&#x7801;&#x90FD;&#x653E;&#x5230;&#x4E00;&#x4E2A;git&#x4ED3;&#x5E93;&#x4E2D;&#xFF08;&#x6211;&#x6700;&#x5F00;&#x59CB;&#x6240;&#x505A;&#x7684;&#x90A3;&#x6837;&#xFF09;&#xFF0C;&#x90A3;&#x4E48;git&#x4ED3;&#x5E93;&#x7684;&#x6539;&#x53D8;&#x5C06;&#x4F1A;&#x5F71;&#x54CD;&#x6240;&#x6709;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x53EA;&#x662F;&#x60F3;&#x4E3A;&#x4E00;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x7F3A;&#x9677;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#xFF0C;&#x7ED3;&#x679C;&#x5374;&#x4E3A;&#x6240;&#x6709;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x521B;&#x5EFA;&#x4E86;&#x5206;&#x652F;&#x3002;&#x8FD9;&#x4E0D;&#x662F;&#x6211;&#x771F;&#x6B63;&#x60F3;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x4F1A;&#x5BF9;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#xFF08;&#x5373;merge&#xFF09;&#x3002;</p>
<p>Since each microservice has a very small footprint from a code point of view, on boarding new developers to work on a microservice is much easier. The smaller code base makes it much easier to learn. In addition I can do releases of each microservice independent of the others. I no longer have the problem of a bug being found at the last minute in a single component that blocks the entire release. If one microservice has a bug we can go back and address that bug while the other microservices continue to move forward unaffected.</p>
<p>&#x7531;&#x4E8E;&#x6BCF;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x90FD;&#x6709;&#x975E;&#x5E38;&#x5C0F;&#x7684;&#x4EE3;&#x7801;&#x8BB0;&#x5F55;&#x70B9;&#xFF0C;&#x5BF9;&#x4E8E;&#x65B0;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x5F00;&#x53D1;&#x8005;&#x6765;&#x8BF4;&#x5C31;&#x53D8;&#x5F97;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x8FD9;&#x79CD;&#x66F4;&#x5C0F;&#x7684;&#x4EE3;&#x7801;&#x5E93;&#x66F4;&#x5BB9;&#x6613;&#x5B66;&#x4E60;&#x3002;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x6211;&#x4E5F;&#x53EF;&#x4EE5;&#x5BF9;&#x6BCF;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x8FDB;&#x884C;&#x72EC;&#x7ACB;&#x53D1;&#x5E03;&#xFF0C;&#x4E0D;&#x4F1A;&#x5728;&#x6700;&#x540E;&#x4E00;&#x5206;&#x949F;&#x53EA;&#x662F;&#x56E0;&#x4E3A;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x7684;&#x5C0F;bug&#x5C31;&#x505C;&#x6B62;&#x4E86;&#x6240;&#x6709;&#x7684;&#x53D1;&#x5E03;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x6709;bug&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x56DE;&#x53BB;&#x8BA8;&#x8BBA;&#x8FD9;&#x4E2A;bug&#xFF0C;&#x800C;&#x5176;&#x4ED6;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x5219;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x5411;&#x524D;&#x800C;&#x4E0D;&#x7528;&#x53D7;&#x5F71;&#x54CD;&#x3002;</p>
<p>Wow that was a lot to take in right? And guess what, we are only part way there! My application&#x2019;s architecture is certainly better now that it is using microservices but not perfect, there are still one or two problems we need to address. I think I will let everyone digest this blog post first before we dive into part two and address some of these issues.</p>
<p>&#x5230;&#x8FD9;&#x91CC;&#x5DF2;&#x7ECF;&#x5F88;&#x591A;&#x4E86;&#xFF0C;&#x5BF9;&#x5427;&#xFF1F;&#x731C;&#x731C;&#x600E;&#x4E48;&#x7740;&#xFF0C;&#x8FD9;&#x53EA;&#x662F;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;&#x6211;&#x7684;&#x5E94;&#x7528;&#x4F7F;&#x7528;&#x4E86;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#xFF0C;&#x867D;&#x7136;&#x4E0D;&#x5B8C;&#x7F8E;&#x4F9D;&#x7136;&#x5B58;&#x5728;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x73B0;&#x5728;&#x770B;&#x6765;&#x786E;&#x5B9E;&#x597D;&#x591A;&#x4E86;&#x3002;&#x6211;&#x60F3;&#x6211;&#x4F1A;&#x8BA9;&#x5927;&#x5BB6;&#x5148;&#x6D88;&#x5316;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FDB;&#x5165;&#x5230;&#x7B2C;&#x4E8C;&#x90E8;&#x5206;&#x6765;&#x8BA8;&#x8BBA;&#x5176;&#x4E2D;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<hr>
<p>For more detailed information on microservices I suggest you read <a href="http://martinfowler.com/articles/microservices.html" target="_blank">Marin Fowlers and James Lewis post on the topic</a>. There are many other resources on the internet that discuss the topic in great detail. If you are one of those people that fancies reading books, I suggest you check out this <a href="http://shop.oreilly.com/product/0636920033158.do" target="_blank">one on microservices</a>. I haven&#x2019;t read the whole thing yet, but so far so good in my opinion. There is also a recently released <a href="http://www.redbooks.ibm.com/redpieces/abstracts/sg248275.html?Open" target="_blank">RedBook from IBM on microservices</a>, I have not read this one yet so can&#x2019;t offer any thoughts on it. In addition to the RedBook there is a nice interview with<a href="http://www.constantcontact.com/home-page?s_tnt=68097:20:0" target="_blank">Constant Contact</a> done by my colleague <a href="https://bluemixstirred.wordpress.com/" target="_blank">Carlos M Ferreira</a> where they discuss how Constant Contact is using microservices.</p>
<p>&#x6709;&#x5173;&#x4E8E;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x6211;&#x63A8;&#x8350;&#x4F60;&#x53BB;&#x9605;&#x8BFB;<a href="http://martinfowler.com/articles/microservices.html" target="_blank">Marin Fowlers&#x548C;James Lewis&#x6709;&#x5173;&#x4E8E;&#x8FD9;&#x4E2A;&#x8BDD;&#x9898;&#x7684;&#x6587;&#x7AE0;</a>&#x3002;&#x5728;&#x7F51;&#x7EDC;&#x4E0A;&#x6709;&#x5F88;&#x591A;&#x5176;&#x4ED6;&#x6709;&#x5173;&#x4E8E;&#x6B64;&#x8BDD;&#x9898;&#x7EC6;&#x8282;&#x7684;&#x8D44;&#x6E90;&#x3002;&#x5982;&#x679C;&#x4F60;&#x662F;&#x70ED;&#x8877;&#x4E8E;&#x8BFB;&#x4E66;&#x7684;&#x4EBA;&#xFF0C;&#x6211;&#x5411;&#x4F60;&#x63A8;&#x8350;&#x8FD9;&#x672C;&#x4E66;<a href="http://shop.oreilly.com/product/0636920033158.do" target="_blank">one on microservices</a>&#x3002;&#x6211;&#x8FD8;&#x6CA1;&#x6709;&#x5B8C;&#x5168;&#x8BFB;&#x5B8C;&#xFF0C;&#x4F46;&#x662F;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#x6211;&#x611F;&#x89C9;&#x975E;&#x5E38;&#x4E0D;&#x9519;&#x3002;&#x8FD9;&#x8FD8;&#x6709;&#x4E00;&#x672C;&#x521A;&#x53D1;&#x5E03;&#x7684;<a href="http://www.redbooks.ibm.com/redpieces/abstracts/sg248275.html?Open" target="_blank">RedBook from IBM on microservices</a>&#xFF0C;&#x6211;&#x8FD8;&#x6CA1;&#x8BFB;&#x8FC7;&#x6240;&#x4EE5;&#x65E0;&#x6CD5;&#x63D0;&#x4F9B;&#x4EFB;&#x4F55;&#x610F;&#x89C1;&#x3002;&#x9664;&#x4E86;&#x8FD9;&#x672C;RedBook&#x4EE5;&#x5916;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x4E0D;&#x9519;&#x7684;&#x8BBF;&#x8C08;<a href="http://www.constantcontact.com/home-page?s_tnt=68097:20:0" target="_blank">Constant Contact</a>&#xFF0C;&#x8FD9;&#x662F;&#x5728;&#x6211;&#x7684;&#x5927;&#x5B66;<a href="https://bluemixstirred.wordpress.com/" target="_blank">Carlos M Ferreira</a>&#x4E2D;&#x4ED6;&#x4EEC;&#x6240;&#x8BA8;&#x8BBA;&#x7684;Constant Contact&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x3002;</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./index.html" class="navigation navigation-prev " aria-label="Previous page: Introduction"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./using_microservices_to_build_cloud_native_applications__part_2.html" class="navigation navigation-next " aria-label="Next page: Using Microservices To Build Cloud Native Applications – Part 2"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
